FROM golang:alpine AS builder
ENV CGO_ENABLED=1
RUN apk update && apk add --bo-cache git
run mkdir /lib64 && ln -s /lib/libx.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2

COPY main.go ./
RUN go build main.go -o ./cacheServer

FROM scratch

COPY --from=builder ./cacheServer ./

ENTRYPOINT ["./cacheServer"]

